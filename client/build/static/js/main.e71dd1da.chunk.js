(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),c=a(13),n=a.n(c),i=(a(68),a(14)),l=a(29),j=a(60);const d="GET_ERRORS",o="USER_LOADING",b="SET_CURRENT_USER",h=a(74),u={isAuthenticated:!1,user:{},loading:!1};const O={};var x=Object(l.b)({auth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{...e,isAuthenticated:!h(t.payload),user:t.payload};case o:return{...e,loading:!0};default:return e}},errors:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return t.type===d?t.payload:e}});const m=[j.a],p="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c;var g=Object(l.d)(x,{},p(Object(l.a)(...m))),v=a(21),f=a(8),y=a(25),N=a.n(y);var C=e=>{e?N.a.defaults.headers.common.Authorization=e:delete N.a.defaults.headers.common.Authorization},w=a(35);const S=e=>t=>{N.a.post("/users/login",e).then((e=>{const{token:a}=e.data;localStorage.setItem("jwtToken",a),C(a);const s=Object(w.a)(a);t(L(s))})).catch((e=>t({type:d,payload:e.response.data})))},L=e=>({type:b,payload:e}),k=()=>e=>{localStorage.removeItem("jwtToken"),C(!1),e(L({}))};var E=a(108),I=a(114),A=a(109),U=a(3),F=a.n(U),_=a(2);var R=Object(i.b)((e=>({auth:e.auth,errors:e.errors})),{loginUser:S})((function(e){const[t,a]=Object(s.useState)(""),[r,c]=Object(s.useState)(""),[n,i]=Object(s.useState)({}),l=Object(f.g)();return Object(s.useEffect)((()=>{e.auth.isAuthenticated&&l.push("/")}),[l,e.auth,e.auth.isAuthenticated]),Object(s.useEffect)((()=>{i(e.errors)}),[e.errors]),Object(_.jsx)("div",{className:"Login",children:Object(_.jsxs)(E.a,{children:[Object(_.jsx)("h2",{className:"display-2 text-center",children:"Login"}),Object(_.jsxs)(I.a,{noValidate:!0,onSubmit:a=>{a.preventDefault();const s={username:t,password:r};e.loginUser(s)},children:[Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Username"})}),Object(_.jsx)(I.a.Control,{type:"username",required:!0,id:"username",placeholder:"Enter username",onChange:e=>a(e.target.value),value:t,tabIndex:1,isInvalid:!!n.username||!!n.usernamenotfound,className:F()("",{invalid:n.username||n.usernamenotfound})}),Object(_.jsxs)(I.a.Control.Feedback,{type:"invalid",children:[n.username,n.usernamenotfound]})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Password"})}),Object(_.jsx)(I.a.Control,{type:"password",required:!0,id:"password",autoComplete:"true",placeholder:"Enter password",onChange:e=>c(e.target.value),value:r,tabIndex:2,isInvalid:!!n.password||!!n.passwordincorrect,className:F()("",{invalid:n.password||n.passwordincorrect})}),Object(_.jsxs)(I.a.Control.Feedback,{type:"invalid",children:[n.password,n.passwordincorrect]})]}),Object(_.jsx)(A.a,{variant:"primary",type:"submit",children:"Login"})]}),Object(_.jsx)("div",{className:"text-center",children:Object(_.jsxs)("p",{className:"fs-5",children:["Don't have an account? ",Object(_.jsx)(v.b,{to:"/register",children:"Register here!"})]})})]})})})),G=a(110),T=a(61);var D=Object(i.b)((e=>({auth:e.auth,errors:e.errors})),{registerUser:(e,t)=>a=>{N.a.post("/users/register",e).then((e=>t.push("/login"))).catch((e=>a({type:d,payload:e.response.data})))}})(Object(f.h)((function(e){const[t,a]=Object(s.useState)(""),[r,c]=Object(s.useState)(""),[n,i]=Object(s.useState)(""),[l,j]=Object(s.useState)(""),[d,o]=Object(s.useState)(""),[b,h]=Object(s.useState)(""),[u,O]=Object(s.useState)(""),[x,m]=Object(s.useState)(""),[p,g]=Object(s.useState)(""),[y,N]=Object(s.useState)({}),C=Object(f.g)();return Object(s.useEffect)((()=>{e.auth.isAuthenticated&&C.push("/")}),[C,e.auth,e.auth.isAuthenticated]),Object(s.useEffect)((()=>{N(e.errors)}),[e.errors]),Object(_.jsx)("div",{className:"Register",children:Object(_.jsxs)(E.a,{children:[Object(_.jsx)("h2",{className:"display-2 text-center",children:"Register"}),Object(_.jsxs)(I.a,{noValidate:!0,onSubmit:a=>{a.preventDefault();const s={first_name:t,last_name:r,m_initial:n,email:b,username:u,password:x,password2:p,discord:l,uin:d};e.registerUser(s,C)},children:[Object(_.jsxs)(G.a,{children:[Object(_.jsx)(T.a,{children:Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"First name"})}),Object(_.jsx)(I.a.Control,{onChange:e=>a(e.target.value),required:!0,value:t,isInvalid:y.name,id:"fname",type:"text",className:F()("",{invalid:y.name})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.name})]})}),Object(_.jsx)(T.a,{children:Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Middle Initial"})}),Object(_.jsx)(I.a.Control,{onChange:e=>i(e.target.value),required:!0,value:n,isInvalid:y.name,id:"m_initial",type:"text",className:F()("",{invalid:y.name})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.name})]})}),Object(_.jsx)(T.a,{children:Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Last name"})}),Object(_.jsx)(I.a.Control,{onChange:e=>c(e.target.value),required:!0,value:r,isInvalid:y.name,id:"lname",type:"text",className:F()("",{invalid:y.name})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.name})]})})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"UIN"})}),Object(_.jsx)(I.a.Control,{onChange:e=>o(e.target.value),value:d,isInvalid:!!y.uin,id:"uin",type:"text",className:F()("",{invalid:y.uin})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.uin})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Email Address"})}),Object(_.jsx)(I.a.Control,{onChange:e=>h(e.target.value),value:b,isInvalid:!!y.registerEmail,id:"email",type:"email",className:F()("",{invalid:y.registerEmail})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.registerEmail})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Username"})}),Object(_.jsx)(I.a.Control,{onChange:e=>O(e.target.value),required:!0,value:u,isInvalid:!!y.registerUsername,id:"username",type:"text",className:F()("",{invalid:y.registerUsername})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.registerUsername})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Password"})}),Object(_.jsx)(I.a.Control,{onChange:e=>m(e.target.value),value:x,isInvalid:y.registerPassword,id:"password",type:"password",className:F()("",{invalid:y.registerPassword})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.registerPassword})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Confirm Password"})}),Object(_.jsx)(I.a.Control,{onChange:e=>g(e.target.value),value:p,isInvalid:y.registerPassword2,id:"password2",type:"password",className:F()("",{invalid:y.registerPassword2})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.registerPassword2})]}),Object(_.jsxs)(I.a.Group,{className:"mb-3",children:[Object(_.jsx)(I.a.Label,{children:Object(_.jsx)("b",{children:"Discord"})}),Object(_.jsx)(I.a.Control,{onChange:e=>j(e.target.value),required:!0,value:l,isInvalid:!!y.registerDiscord,id:"discord",type:"text",className:F()("",{invalid:y.registerDiscord})}),Object(_.jsx)(I.a.Control.Feedback,{type:"invalid",children:y.registerDiscord})]}),Object(_.jsx)(A.a,{variant:"primary",type:"submit",children:"Register"})]}),Object(_.jsx)("div",{className:"text-center",children:Object(_.jsxs)("p",{className:"fs-5",children:["Already have an account? ",Object(_.jsx)(v.b,{to:"/login",children:"Login here!"})]})})]})})}))),P=a(111),M=a(62);var q=Object(i.b)((e=>({auth:e.auth,errors:e.errors})),{loginUser:S})((function(e){const[t,a]=Object(s.useState)(!0),[c,n]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{e.auth.isAuthenticated?n(!0):n(!1)}),[e.auth,e.auth.isAuthenticated]),Object(M.useSpring)({to:{opacity:1},from:{opacity:0},delay:100}),Object(_.jsx)("div",{className:"Landing",children:Object(_.jsx)(E.a,{children:c?Object(_.jsx)(r.a.Fragment,{children:t?Object(_.jsx)("div",{className:"d-flex justify-content-center",children:Object(_.jsx)(P.a,{animation:"border"})}):Object(_.jsxs)(r.a.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsxs)("h2",{className:"display-3 text-center",children:["Welcome to TAMU CyberSecurity Club ",e.auth.user.first_name,"!"]})]})}):Object(_.jsxs)(r.a.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsxs)("h2",{className:"display-8 text-center",children:["Please ",Object(_.jsx)("a",{href:"/login",children:"Log In"})," or ",Object(_.jsx)("a",{href:"/register",children:"Register"}),"!"]}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{})]})})})})),B=a(112),V=a(113),z=a.p+"static/media/logo192.31be1d26.png";var H=Object(i.b)((e=>({auth:e.auth})),{logoutUser:k})((function(e){const[t,a]=Object(s.useState)(!1),[c,n]=Object(s.useState)(!1),[i,l]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{e.auth.isAuthenticated?a(!0):(a(!1),n(!1)),"admin"===e.auth.user.role&&(n(!0),l(!1)),"user"===e.auth.user.role&&(l(!0),n(!1))}),[e.auth,e.auth.isAuthenticated]),Object(_.jsx)("div",{className:"Navbar shadow-sm",children:Object(_.jsx)(B.a,{collapseOnSelect:!0,expand:"lg",children:Object(_.jsxs)(E.a,{fluid:!0,children:[Object(_.jsxs)(B.a.Brand,{href:"/",children:[Object(_.jsx)("img",{alt:"logo",src:z,width:"auto",height:"30",className:"d-inline-block align-top mr-2"}),"TAMU CyberSecurity Club"]}),Object(_.jsx)(B.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(_.jsxs)(B.a.Collapse,{id:"responsive-navbar-nav",children:[Object(_.jsxs)(V.a,{className:"me-auto",children:[i&&Object(_.jsxs)(r.a.Fragment,{children:[t&&Object(_.jsx)(V.a.Link,{href:"/menu",children:"Menu"}),t&&Object(_.jsx)(V.a.Link,{href:"/bag",children:"Bag"}),t&&Object(_.jsx)(V.a.Link,{href:"/settings",children:"Settings"}),t&&Object(_.jsx)(V.a.Link,{href:"/help",children:"Help"})]}),c&&Object(_.jsxs)(r.a.Fragment,{children:[t&&Object(_.jsx)(V.a.Link,{href:"/processOrders",children:"Process Orders"}),t&&Object(_.jsx)(V.a.Link,{href:"/adjustMenu",children:"Adjust Menu"}),t&&Object(_.jsx)(V.a.Link,{href:"/addMenuItem",children:"Add Menu Item"}),t&&Object(_.jsx)(V.a.Link,{href:"/reports",children:"Reports"}),t&&Object(_.jsx)(V.a.Link,{href:"/settings",children:"Settings"}),t&&Object(_.jsx)(V.a.Link,{href:"/help",children:"Help"})]})]}),Object(_.jsxs)(V.a,{children:[!t&&Object(_.jsx)(V.a.Link,{href:"/login",children:"Login"}),!t&&Object(_.jsx)(V.a.Link,{href:"/register",children:"Register"}),t&&Object(_.jsx)(V.a.Link,{onClick:t=>{t.preventDefault(),e.logoutUser(),a(!1)},children:screenText.Logout})]})]})]})})})}));Object(i.b)((e=>({auth:e.auth})))((e=>{let{component:t,auth:a,...s}=e;return Object(_.jsx)(f.b,{...s,render:e=>!0!==a.isAuthenticated||"user"!==a.user.role&&"admin"!==a.user.role?Object(_.jsx)(f.a,{to:"/login"}):Object(_.jsx)(t,{...e})})}));Object(i.b)((e=>({auth:e.auth})))((e=>{let{component:t,auth:a,...s}=e;return Object(_.jsx)(f.b,{...s,render:e=>!0===a.isAuthenticated&&"admin"===a.user.role?Object(_.jsx)(t,{...e}):Object(_.jsx)(f.a,{to:"/login"})})}));if(localStorage.jwtToken){const e=localStorage.jwtToken;C(e);const t=Object(w.a)(e);g.dispatch(L(t));const a=Date.now()/1e3;t.exp<a&&(g.dispatch(k()),window.location.href="./login")}var J=function(){return Object(_.jsx)(i.a,{store:g,children:Object(_.jsx)(v.a,{children:Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(H,{}),Object(_.jsx)(f.b,{exact:!0,path:"/",component:q}),Object(_.jsxs)(f.d,{children:[Object(_.jsx)(f.b,{exact:!0,path:"/login",component:R}),Object(_.jsx)(f.b,{exact:!0,path:"/register",component:D})]})]})})})};n.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(J,{})}),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.e71dd1da.chunk.js.map